
       spcmake_byFF4.exe
                                 　　　　      by pgate1

FF4サウンドドライバやFF4波形を使ってSPCを生成します。
HexMMLはFF4サウンドドライバ向けに特化したものです。

※警告
生成されるSPCにはFF4のサウンドドライバや波形データが含まれています。
SPCデータを容易に公開されることはご遠慮ください。


▼ 使い方

ご自身でFF4カートリッジからFinalFantasy4.romをダンプする。
FinalFantasy4.romをspcmake_byFF4.exeと同じ場所に置く。
必要であれば.brrを用意する。
sample.txt のようなHexMMLを書く。
spcmake_byFF4.batをダブルクリック。
エラーが無ければsample.spcが生成される。

・コツ

制御コードは16進大文字で 0x 等はつけない。
制御コードはスペースを空ける（実は開けなくてもよい）。
#toneは@の上であればどこで定義しても良い。
「このファイルは"PKCS#7"として使用することはできません」のメッセージは.spcにプレイヤが関連付けられていないため。


▼ 履歴

2020/09/19
使用していない#toneがある場合に警告を出すよう追加。

2020/08/25
ジャンプコマンド(J)を追加。

2020/08/23
#swap<>を追加。

2020/08/21
#brr_offset指定が無ければ効果音シーケンスを埋め込むよう修正。

2020/08/12
#tone指定を数字のみから文字列も使えるように変更。

2020/08/01
"]3]4"のようなループ記述が失敗する不具合を修正。
（"]3 ]4"のようにスペースがあれば問題なかった）

2020/02/03
引数形式の変更。spcmake_byFF4.exe -i input.txt -o output.spc
brr2wavの追加。

2020/01/19
BRRファイルサイズをチェックするように。ファイルサイズは 9X+2 であること。
FF4inst番号を10進数指定から16進数指定へ変更。

2020/01/18
各トラックのティック数を計算して表示するように。
BRRの標準配置領域が常駐波形BRR領域に重なった場合エラーを出すように。

2020/01/12
#brr_offset auto で常駐波形BRRを波形BRRの直後に置くようにした。
#tone の tuning 指定で音程補正値を埋め込むようにした。
#echo_depth でEDLを指定できるようにした。
@@n で効果音を鳴らせるように。

2020/01/11
初版。


------------------------------------------------------------------------
@brr890様にはサウンドドライバやMML等について多くのアドバイスを頂きました。
心より感謝申し上げます。

SPCプレイヤには黒羽製作所様の黒猫SPCを使用させていただきました。
各レジスタ表示が分かりやすくデバグが捗りました。

SPCのデータ表示や解析にはVGMTransを使用させていただきました。
シーケンスや波形データ位置などの確認がし易かったです。

brr2wavにはごちゃ様のbrr2wav.cppを使用させていただきました。

また次のサイトも参考にさせていただきました。先人の情報共有に感謝します。
・SuperC
　https://github.com/boldowa/SuperC-SPCdrv
・FinalFantasyIV 制御コード
　http://gnilda.rosx.net/SPC/F4/command.html
・FFIVサウンド関係 ffbin@Wiki
　https://w.atwiki.jp/ffbin/pages/36.html


------------------------------------------------------------------------
pgate1
Web https://pgate1.at-ninja.jp
Twitter https://twitter.com/pgate1
